// ==========================================
// MIXINS
// ==========================================
@use "sass:meta";
@use "sass:map";
@use "variables" as *;
@use "functions" as *;

// ==========================================
// TEMAS - SELECTORES
// ==========================================
@mixin dark-theme {
  [data-theme-base="dark"] & {
    @content;
  }
}

@mixin faculty-theme($faculty-name) {
  [data-theme-faculty="#{$faculty-name}"] & {
    @content;
  }
}

@mixin combined-theme($base: null, $faculty: null) {
  $selector: "";

  @if $base and $faculty {
    $selector: '[data-theme-base="#{$base}"][data-theme-faculty="#{$faculty}"]';
  } @else if $base {
    $selector: '[data-theme-base="#{$base}"]';
  } @else if $faculty {
    $selector: '[data-theme-faculty="#{$faculty}"]';
  }

  @if $selector != "" {
    #{$selector} & {
      @content;
    }
  }
}

// ==========================================
// RESPONSIVE
// ==========================================
@mixin responsive($break_point: $breakpoint-md) {
  @media (max-width: $break_point) {
    @content;
  }
}

// ==========================================
// COMPONENTES - COLORES
// ==========================================
@mixin colors-variants($base-class, $mixin-ref) {
  $color-names: ("primary", "secondary", "tertiary", "neutral", "success", "warning", "danger");

  @each $color-name in $color-names {
    .#{$base-class}-#{$color-name} {
      @include meta.apply($mixin-ref, null, $color-name);
    }
  }
}

// ==========================================
// UTILIDADES
// ==========================================
@mixin text-style(
  $size,
  $weight: map.get($font-weights, "normal"),
  $spacing: normal,
  $line-height: 1.5
) {
  font-size: $size;
  font-weight: $weight;
  letter-spacing: $spacing;
  line-height: $line-height;
  font-family: $font-family;
}

@mixin liferay-edit-mode {
  .has-edit-mode-menu &,
  .signed-in & {
    @content;
  }
}

@mixin only-dev-mode {
  [data-env="development"] & {
    @content;
  }
}

// ==========================================
// RESET Y BASE
// ==========================================
@mixin button-reset {
  appearance: none;
  background: none;
  border: none;
  padding: 0;
  margin: 0;
  font: inherit;
  color: inherit;
  text-decoration: none;
  cursor: pointer;
  outline: none;
}

@mixin input-reset {
  appearance: none;
  background: none;
  border: none;
  padding: 0;
  margin: 0;
  font: inherit;
  color: inherit;
  outline: none;
  resize: none;
}

// ==========================================
// LAYOUT
// ==========================================
@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

@mixin absolute-center {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

@mixin container($max-width: null) {
  width: 100%;
  margin: 0 auto;
  padding: 0 map.get($spacing, "md");

  @if $max-width {
    max-width: $max-width;
  }
}

// ==========================================
// ANIMACIONES
// ==========================================
@mixin transition(
  $properties: all,
  $duration: map.get($transitions, "normal"),
  $timing: ease-in-out
) {
  transition: $properties $duration $timing;
}

@mixin hover-lift {
  @include transition(transform);

  &:hover {
    transform: translateY(rem(-2px));
  }
}

// ==========================================
// SOMBRAS
// ==========================================
@mixin shadow($level: "sm") {
  box-shadow: map.get($shadows, $level);
}

@mixin focus-ring($color: map.get($color-base, "primary")) {
  outline: #{rem(2px)} solid $color;
  outline-offset: #{rem(2px)};
}

// ==========================================
// TEXTO
// ==========================================
@mixin truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

@mixin line-clamp($lines: 2) {
  display: -webkit-box;
  -webkit-line-clamp: $lines;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

// ==========================================
// UTILIDADES DE ACCESIBILIDAD
// ==========================================
@mixin sr-only {
  position: absolute !important;
  width: rem(1px) !important;
  height: rem(1px) !important;
  padding: 0 !important;
  margin: rem(-1px) !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

// ==========================================
// GENERADORES AUTOM√ÅTICOS
// ==========================================
@mixin generate-legacy-classes($classes...) {
  @each $class in $classes {
    .#{$class} {
      @extend .#{$class};
    }
  }
}

@mixin button-color-variant($color-name, $text-color: white) {
  $color: map.get($color-base, $color-name);
  $hover-color: if($color-name == "warning", darken($color, 15%), darken($color, 10%));

  &.btn-#{$color-name} {
    // Solid variant
    &.btn-solid,
    &:not([class*="btn-"]) {
      background: $color;
      border-color: $color;
      color: $text-color;

      &:hover:not(:disabled) {
        background: $hover-color;
        border-color: $hover-color;
      }
    }

    // Other variants
    &.btn-bordered,
    &.btn-ghost,
    &.btn-light,
    &.btn-link {
      color: $color;
      border-color: $color;

      &:hover:not(:disabled) {
        color: $hover-color;
        border-color: $hover-color;
      }
    }

    // Ghost hover special case
    &.btn-ghost:hover:not(:disabled) {
      background: $color;
      color: $text-color;
    }
  }
}

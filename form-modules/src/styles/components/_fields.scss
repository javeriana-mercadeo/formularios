// ==========================================
// CAMPOS DE FORMULARIO
// ==========================================
@use "sass:map";
@use "../abstracts" as *;

// ==========================================
// LISTA DROPDOWN
// ==========================================
.dropdown-list {
  background: map.get($color-base, "white");
  border: rem(1px) solid rgba(map.get($color-base, "neutral"), 0.3);
  border-radius: map.get($border-radius, "md");
  max-height: rem(200px);
  overflow-y: auto;
  list-style: none;
  padding: 0;
  margin: map.get($spacing, "sm") 0;
  font-size: map.get($font-sizes, "sm");
  @include shadow("sm");

  li {
    padding: map.get($spacing, "sm") map.get($spacing, "md");
    cursor: pointer;
    border-bottom: rem(1px) solid rgba(map.get($color-base, "neutral"), 0.1);
    @include transition(all);

    &:hover {
      background: rgba(map.get($color-base, "primary"), 0.05);
      color: map.get($color-base, "primary");
    }

    &:last-child {
      border-bottom: none;
    }
  }
}

// ==========================================
// GRUPO DE CAMPOS
// ==========================================
.field-group {
  display: flex;
  gap: map.get($spacing, "sm");
  width: 100%;
  box-sizing: border-box;
  margin-bottom: map.get($spacing, "lg");

  &:last-of-type {
    margin-bottom: 0;
  }

  .field {
    flex: 1;
    margin-bottom: 0;

    input,
    select,
    textarea {
      width: 100%;
      box-sizing: border-box;
    }

    .error_text {
      margin-top: map.get($spacing, "xs");
    }
  }

  // Modificadores específicos
  .field-prefix {
    flex: 0 0 #{rem(120px)};
    min-width: #{rem(120px)};
  }

  .field-main {
    flex: 1;
    min-width: 0; // Permite que el campo se encoja correctamente
  }
}

// ==========================================
// CAMPO INDIVIDUAL
// ==========================================
.field {
  display: flex;
  flex-direction: column;
  box-sizing: border-box;
  width: 100%;
  margin-bottom: map.get($spacing, "lg");

  &:last-of-type {
    margin-bottom: 0;
  }

  // Auto-hide cuando contenga elementos ocultos
  &:has(input[style*="display: none"]),
  &:has(select[style*="display: none"]),
  &:has(textarea[style*="display: none"]),
  &:has(input.hidden),
  &:has(select.hidden),
  &:has(textarea.hidden),
  &:has(input[hidden]),
  &:has(select[hidden]),
  &:has(textarea[hidden]) {
    display: none;
  }

  &.hidden,
  &[hidden] {
    display: none;
  }

  input,
  select,
  textarea {
    width: 100%;
    box-sizing: border-box;
  }

  .error_text {
    margin-top: map.get($spacing, "xs");
    margin-bottom: 0;
  }
}

// ==========================================
// GRUPO DE RADIOS
// ==========================================
.radio-group {
  display: flex;
  gap: map.get($spacing, "lg");
  margin-top: map.get($spacing, "sm");
  align-items: center;
}

.radio-option {
  display: flex;
  align-items: center;
  gap: map.get($spacing, "xs");

  input[type="radio"] {
    margin: 0;
    width: rem(16px);
    height: rem(16px);
    accent-color: map.get($color-base, "primary");
  }

  label {
    margin: 0;
    cursor: pointer;
    font-size: map.get($font-sizes, "sm");
    color: map.get($color-base, "neutral");
  }
}

// ==========================================
// SECCIÓN DE AUTORIZACIÓN
// ==========================================
.authorization-section {
  margin-top: map.get($spacing, "xl");
  margin-bottom: 0;
  padding: map.get($spacing, "lg");
  background: rgba(map.get($color-base, "neutral"), 0.05);
  border-radius: map.get($border-radius, "md");
  border-top: 1px solid rgba(map.get($color-base, "neutral"), 0.1);

  p {
    margin-bottom: map.get($spacing, "sm");
    font-size: map.get($font-sizes, "sm");
    color: map.get($color-base, "black");
    font-weight: map.get($font-weights, "medium");
  }

  .radio-group {
    margin-top: map.get($spacing, "sm");
    margin-bottom: 0;
  }
}

// ==========================================
// CHECKBOX
// ==========================================
.checkbox-option {
  display: flex;
  align-items: center;
  gap: map.get($spacing, "xs");
  margin: map.get($spacing, "sm") 0;

  input[type="checkbox"] {
    width: rem(16px);
    height: rem(16px);
    accent-color: map.get($color-base, "primary");
  }

  label {
    cursor: pointer;
    font-size: map.get($font-sizes, "sm");
    color: map.get($color-base, "neutral");
  }
}

// ==========================================
// RESPONSIVE
// ==========================================
@media (max-width: #{$breakpoint-md}) {
  .field-group {
    gap: map.get($spacing, "xs");

    // Para tablet mantener un buen balance
    .field-prefix {
      flex: 0 0 #{rem(100px)};
      min-width: #{rem(100px)};
    }
  }

  .radio-group {
    flex-direction: column;
    align-items: flex-start;
    gap: map.get($spacing, "xs");
  }
}

@media (max-width: #{$breakpoint-sm}) {
  .field,
  .field-group {
    margin-bottom: map.get($spacing, "xs");
  }

  .field-group {
    gap: map.get($spacing, "xs");

    // Para móvil más compacto pero legible
    .field-prefix {
      flex: 0 0 #{rem(80px)};
      min-width: #{rem(80px)};
    }
  }
}
